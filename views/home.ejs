<%- include("partials/header.ejs") -%>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Your Page Title</title>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <!-- Lodash CDN -->
  </head>

  <body>
    <div class="main">
      <h1 class="item-heading">EMBARK ON A JOURNEY</h1>
      <p class="item-text"><%= homestart %></p>
      <% posts.forEach((item) => { %>
      <div class="divider">
        <h1 class="item-heading"><%= item.heading %></h1>
        <p class="item-text">
          <%= item.description.length > 100 ? item.description.slice(0, 150) +
          '...' : item.description %>
          <a href="#" class="read-more" data-heading="<%= item.heading %>"
            >Read more</a
          >
        </p>
      </div>
      <% }); %>
    </div>

    <script>
      // Using Lodash to convert the headings to lowercase without spacing for URLs
      document.querySelectorAll('.read-more').forEach(anchor => {
        const heading = anchor.getAttribute('data-heading')
        // Convert to lowercase and remove spaces
        const lowerCaseHeading = _.replace(_.toLower(heading), /\s+/g, '')
        anchor.href = '/posts/' + lowerCaseHeading
      })
    </script>

    <%- include("partials/footer.ejs") -%>
  </body>
</html>
